# Connecting PS3 Controller to PC via Bluetooth and USB (Linux CLI)

This guide provides instructions on how to connect a PlayStation 3 (PS3) controller to your PC using the Linux command-line interface (CLI).

## Prerequisites

- Make sure your computer has Bluetooth capabilities and that Bluetooth is enabled.

## Initial pairing

1. Install the required dependencies by running the following command:

    ```
    sudo apt-get install bluez
    ```

2. Run the `bluetoothctl` command to start the Bluetooth control tool:

    ```
    bluetoothctl
    ```

3. Connect the PS3 DualShock 3 controller to your PC using the USB cable.

4. PS3 DualShock 3 controller should appear in the list of discovered devices.

5. Message like this should appear 'Authorize service 00001124-0000-1000-8000-00805f9b34fb (yes/no):' 
   Type yes

6. Pair the PS3 Controller pressing the "PS" button on your PS3 DualShock 3 controller 

7. Disconnect the PS3 Controller from your PC's USB port.

8. To connect (already paired) PS3 Controller via Bluetooth, simly press the "PS" button


## Pairing and connecting 

1. Press and hold the "PS" button on your PS3 DualShock 3 controller until the LEDs start blinking rapidly. This puts the controller into pairing mode.

2. Enter the following commands in the `bluetoothctl` prompt:

   ```
   power on
   agent on
   default-agent
   scan on
   ```

3. Wait for the PS3 DualShock 3 controller to appear in the list of discovered devices. It should be listed as "Wireless Controller" or similar.

4. Once the controller is discovered, note its MAC address.

5. Stop the scan by entering `scan off` in the `bluetoothctl` prompt.

6. Pair and connect the PS3 controller by entering the following commands, replacing `<mac_address>` with the actual MAC address of the PS3 controller:

   ```
   pair <mac_address>
   ```
   ```
   connect <mac_address>
   ```

7. If the pairing and connection are successful, you should see a confirmation message.

8. Exit the `bluetoothctl` prompt by entering `exit`.

## Connect PS3 Controller to Windows
[How to Wirelessly Connect a PS3 DualShock Controller to Windows](https://www.makeuseof.com/ps3-dualshock-controller-windows-wireless/)

### Tool for management of Windows drivers in the Driver Store
[DriverStore Explorer](https://github.com/lostindark/DriverStoreExplorer/releases/tag/v0.11.79)

### Connect USB devices to WSL2

[Manual](https://learn.microsoft.com/en-us/windows/wsl/connect-usb)

### USBIPD-WIN 
 is an open-source project that allows sharing locally connected USB devices with other machines, including Hyper-V guests and WSL 2. It provides access to USB devices by using network connectivity over TCP port 3240  
[Manual](https://github.com/dorssel/usbipd-win/wiki/WSL-support)

## Linux commands for working with USB devices
- `lsusb` - lists USB devices connected to the system
- `dmesg` - displays the kernel ring buffer messages
- `dmesg | grep -i usb` - shows kernel log messages related to USB devices, -i - ignore case
- `sudo dmesg -c` - clears the kernel message buffer
- `evtest` -  lists available input devices (e.g., /dev/input/event0, /dev/input/event1, etc.) and used to monitor events generated by these input devices
- `jstest` - shows raw input values from the joystick's axes and buttons (jstest /dev/input/js0)




